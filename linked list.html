<script src='https://d3js.org/d3.v4.min.js'></script>




<!-- highlighting arrows -->

<svg height="1000" width="1000">
  <defs>
    <marker id="arrowhead" viewBox="0 0 10 10" refX="5" refY="5" 
            markerWidth="10" markerHeight="10" orient="auto-start-reverse">
      <path d="M 0 0 L 10 5 L 0 10 z" />
    </marker>
  </defs>
</svg>


<script>
  var nodes = [6,4,1,9,3];
  visusaliseNewNode(true);
  var currIndex = 2;



function visusaliseNewNode(isFirstRender) {
  node = d3.select('svg')
  .selectAll('.node')
  .data(nodes)
  .enter()
  .append('g')
      .attr('class', 'node')
      .attr('transform', function(d, i) {
        return 'translate(' + i * 100 + ',0)';
      });

  // Append a new <circle> element to each <g> element
  node.append('circle')
      .attr('cx', 50)
      .attr('cy', 50)
      .attr('r', 40)
      .attr('stroke', 'blue')
      .attr('stroke-width', 3)
    //   .attr('fill', 'cyan')

      .attr('fill', function(d, i) {
      return i === currIndex ? 'cyan' : 'white';
    });
    

  // Append a new <text> element to each <g> element
  node.append('text')
      .attr('text-anchor', 'middle')
      .attr('fill', 'black')
      .attr('dy', '0.3em') // Adjust the vertical position of text
      .attr('x', 50) // Position the text inside the circle
      .attr('y', 50)
      .attr('font-family', 'Arial')
      .attr('font-size', 30)
      .text(function(d) { return d; });

  // Add an arrow between the previous node and the current node
  node.filter(function(d, i) { return !isFirstRender || i !== 0; }) // Don't add a line before the first node
    .append('line')
      .attr('x1', -9)
      .attr('y1', 50)
      .attr('x2', 8)
      .attr('y2', 50)
      .attr('stroke', 'black')
      .attr('marker-end', 'url(#arrowhead)');
}


function highlightNode(index, colour) {
  node.data(nodes)
  .select('circle')
  .attr('fill', function(d, i) {
    return i === index ? colour : 'white';
  });
}

setTimeout(() => {
  highlightNode(1, 'cyan');
}, 1000)


setTimeout(() => {
  nodes.push(20);
  visusaliseNewNode(false);
}, 2000)

setTimeout(() => {
  nodes.push(50);
  nodes.push(51);
  nodes.push(52);
  visusaliseNewNode(false);
}, 3000)



// function update() {
//     // nodes.push(Math.floor(Math.random() * 10));
//     // nodes.shift();
//     currIndex = (currIndex + 1) % nodes.length;
    

//     node.data(nodes)
//         .transition()
//         .duration(200)
//         .ease(d3.easeLinear)

//     node.select('circle')
//         .transition()
//         .duration(200)
//         .ease(d3.easeLinear)
//         .attr('fill', function(d, i) {
//             return i === currIndex ? 'cyan' : 'white';
//         });

//     node.select('text')
//         .text(function(d) {
//             return d;
//         });
// }

// setInterval(update, 1200);


</script>


















<!-- 
<svg height="1000" width="1000"></svg>


<script>

    var nodes = [1111,22222,33333,4,5,6];

    d3.select('svg')
        .selectAll('circle')
        .data(nodes)
        .enter()


        // .append('circle')
        //     .attr('cx', 50)
        //     .attr('cy', 50)
        //     .attr('r', 40)
        //     .attr('fill', 'blue')
        //     .attr('transform', function(d, i) {
        //     return "translate(0," + i * 100 + ")";
        //   })
        .append('rect')
            .attr('x', 50)
            .attr('y', 50)
            .attr('width', 200)
            .attr('height', 100)
            .attr('fill', 'green')


            
        .append('text')
            // .attr('text-anchor', 'middle')
            .attr('fill', 'black')
            .attr('dy', '.3em') // Adjust the vertical position of text
            .text(function(d) { return d;})
</script> -->


</body>
</html>
